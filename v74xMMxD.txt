-- Warp Hub Premium - COMPLETE WORKING SCRIPT
-- Made by discord.gg/warphub

if not game:IsLoaded() then game.Loaded:Wait() end

-- Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Cleanup
if playerGui:FindFirstChild("WarpHubKeySystem") then playerGui.WarpHubKeySystem:Destroy() end
if playerGui:FindFirstChild("WarpHubPrivate") then playerGui.WarpHubPrivate:Destroy() end

-- Key System Variables
local correctKey = "1heowarp"
local discordLink = "discord.gg/warphub"

-- Create Key GUI
local KeyScreenGui = Instance.new("ScreenGui")
KeyScreenGui.Name = "WarpHubKeySystem"
KeyScreenGui.ResetOnSpawn = false
KeyScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
KeyScreenGui.Parent = playerGui

-- Key Frame - CENTERED
local KeyFrame = Instance.new("Frame")
KeyFrame.Size = UDim2.new(0, 280, 0, 240)
KeyFrame.Position = UDim2.new(0.5, -140, 0.5, -120)
KeyFrame.AnchorPoint = Vector2.new(0.5, 0.5)
KeyFrame.BackgroundColor3 = Color3.fromRGB(15, 5, 30)
KeyFrame.BorderSizePixel = 0
KeyFrame.Parent = KeyScreenGui

-- Glowing Border
local KeyGlow = Instance.new("UIStroke")
KeyGlow.Color = Color3.fromRGB(180, 80, 255)
KeyGlow.Thickness = 2
KeyGlow.Transparency = 0.5
KeyGlow.Parent = KeyFrame

local KeyStroke = Instance.new("UIStroke")
KeyStroke.Color = Color3.fromRGB(200, 100, 255)
KeyStroke.Thickness = 1
KeyStroke.Parent = KeyFrame

local KeyCorner = Instance.new("UICorner")
KeyCorner.CornerRadius = UDim.new(0, 4)
KeyCorner.Parent = KeyFrame

-- Title
local Title = Instance.new("TextLabel")
Title.Text = "WARP HUB PREMIUM"
Title.Size = UDim2.new(1, -20, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 10)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(200, 100, 255)
Title.Font = Enum.Font.Code
Title.TextSize = 18
Title.Parent = KeyFrame

-- Key Input
local KeyInput = Instance.new("TextBox")
KeyInput.PlaceholderText = "Enter key..."
KeyInput.Size = UDim2.new(1, -40, 0, 35)
KeyInput.Position = UDim2.new(0, 20, 0, 50)
KeyInput.BackgroundColor3 = Color3.fromRGB(10, 3, 20)
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.Font = Enum.Font.Code
KeyInput.TextSize = 14
KeyInput.Parent = KeyFrame

local InputCorner = Instance.new("UICorner")
InputCorner.CornerRadius = UDim.new(0, 4)
InputCorner.Parent = KeyInput

local InputStroke = Instance.new("UIStroke")
InputStroke.Color = Color3.fromRGB(150, 60, 220)
InputStroke.Thickness = 1
InputStroke.Parent = KeyInput

-- Verify Button
local VerifyButton = Instance.new("TextButton")
VerifyButton.Text = "VERIFY"
VerifyButton.Size = UDim2.new(1, -40, 0, 35)
VerifyButton.Position = UDim2.new(0, 20, 0, 95)
VerifyButton.BackgroundColor3 = Color3.fromRGB(30, 10, 60)
VerifyButton.TextColor3 = Color3.fromRGB(220, 150, 255)
VerifyButton.Font = Enum.Font.Code
VerifyButton.TextSize = 14
VerifyButton.Parent = KeyFrame

local VerifyCorner = Instance.new("UICorner")
VerifyCorner.CornerRadius = UDim.new(0, 4)
VerifyCorner.Parent = VerifyButton

local VerifyStroke = Instance.new("UIStroke")
VerifyStroke.Color = Color3.fromRGB(180, 80, 255)
VerifyStroke.Thickness = 1
VerifyStroke.Parent = VerifyButton

-- Get Key Button
local GetKeyButton = Instance.new("TextButton")
GetKeyButton.Text = "GET KEY"
GetKeyButton.Size = UDim2.new(1, -40, 0, 35)
GetKeyButton.Position = UDim2.new(0, 20, 0, 140)
GetKeyButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
GetKeyButton.TextColor3 = Color3.fromRGB(220, 180, 255)
GetKeyButton.Font = Enum.Font.Code
GetKeyButton.TextSize = 14
GetKeyButton.Parent = KeyFrame

local GetKeyCorner = Instance.new("UICorner")
GetKeyCorner.CornerRadius = UDim.new(0, 4)
GetKeyCorner.Parent = GetKeyButton

local GetKeyStroke = Instance.new("UIStroke")
GetKeyStroke.Color = Color3.fromRGB(180, 80, 255)
GetKeyStroke.Thickness = 1
GetKeyStroke.Parent = GetKeyButton

-- Status
local StatusLabel = Instance.new("TextLabel")
StatusLabel.Text = ""
StatusLabel.Size = UDim2.new(1, -20, 0, 20)
StatusLabel.Position = UDim2.new(0, 10, 0, 185)
StatusLabel.BackgroundTransparency = 1
StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 150)
StatusLabel.Font = Enum.Font.Code
StatusLabel.TextSize = 12
StatusLabel.Visible = false
StatusLabel.Parent = KeyFrame

-- Key Verification
VerifyButton.MouseButton1Click:Connect(function()
    local enteredKey = string.lower(string.gsub(KeyInput.Text, "%s+", ""))
    
    if enteredKey == correctKey then
        StatusLabel.Text = "Access granted..."
        StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        StatusLabel.Visible = true
        wait(0.5)
        KeyScreenGui:Destroy()
        loadMainScript()
    else
        StatusLabel.Text = "Invalid key"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 150)
        StatusLabel.Visible = true
    end
end)

-- Get Key Button
GetKeyButton.MouseButton1Click:Connect(function()
    setclipboard(discordLink)
    GetKeyButton.Text = "COPIED!"
    StatusLabel.Text = "Link copied: " .. discordLink
    StatusLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
    StatusLabel.Visible = true
    wait(2)
    GetKeyButton.Text = "GET KEY"
    StatusLabel.Visible = false
end)

KeyInput.FocusLost:Connect(function(enterPressed)
    if enterPressed then VerifyButton:Activate() end
end)

-- ============================================================================
-- MAIN SCRIPT LOADER
-- ============================================================================

function loadMainScript()
    local scriptStartTime = tick()
    
    -- Cleanup
    if playerGui:FindFirstChild("WarpHubPrivate") then playerGui.WarpHubPrivate:Destroy() end
    
    -- Services
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Workspace = game:GetService("Workspace")
    local CoreGui = game:GetService("CoreGui")
    
    -- Create Main GUI - SMALLER FOR MOBILE
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "WarpHubPrivate"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = playerGui
    
    -- Toggle Button - SMALLER AND SIMPLE
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Text = "WARP"
    ToggleButton.Size = UDim2.new(0, 50, 0, 25)
    ToggleButton.Position = UDim2.new(1, -55, 0, 5)
    ToggleButton.BackgroundColor3 = Color3.fromRGB(30, 10, 60)
    ToggleButton.TextColor3 = Color3.fromRGB(200, 100, 255)
    ToggleButton.Font = Enum.Font.Code
    ToggleButton.TextSize = 11
    ToggleButton.Parent = ScreenGui
    
    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 3)
    ToggleCorner.Parent = ToggleButton
    
    local ToggleStroke = Instance.new("UIStroke")
    ToggleStroke.Color = Color3.fromRGB(180, 80, 255)
    ToggleStroke.Thickness = 1
    ToggleStroke.Parent = ToggleButton
    
    -- Main Window - SMALLER FOR MOBILE
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 250, 0, 320) -- Smaller
    MainFrame.Position = UDim2.new(0.5, -125, 0.5, -160) -- Centered
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 5, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.Visible = false
    MainFrame.Parent = ScreenGui
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 4)
    MainCorner.Parent = MainFrame
    
    local MainGlow = Instance.new("UIStroke")
    MainGlow.Color = Color3.fromRGB(180, 80, 255)
    MainGlow.Thickness = 2
    MainGlow.Transparency = 0.5
    MainGlow.Parent = MainFrame
    
    local MainStroke = Instance.new("UIStroke")
    MainStroke.Color = Color3.fromRGB(200, 100, 255)
    MainStroke.Thickness = 1
    MainStroke.Parent = MainFrame
    
    -- Top Bar (Draggable) - SMALLER
    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 25) -- Smaller
    TopBar.Position = UDim2.new(0, 0, 0, 0)
    TopBar.BackgroundColor3 = Color3.fromRGB(25, 8, 45)
    TopBar.Parent = MainFrame
    
    local Title = Instance.new("TextLabel")
    Title.Text = "WARP HUB v1.1 PREM"
    Title.Size = UDim2.new(1, -40, 1, 0)
    Title.Position = UDim2.new(0, 5, 0, 0) -- Smaller margin
    Title.BackgroundTransparency = 1
    Title.TextColor3 = Color3.fromRGB(200, 100, 255)
    Title.Font = Enum.Font.Code
    Title.TextSize = 12 -- Smaller
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TopBar
    
    local CloseButton = Instance.new("TextButton")
    CloseButton.Text = "✕"
    CloseButton.Size = UDim2.new(0, 20, 0, 20) -- Smaller
    CloseButton.Position = UDim2.new(1, -25, 0, 2)
    CloseButton.BackgroundColor3 = Color3.fromRGB(40, 5, 15)
    CloseButton.TextColor3 = Color3.fromRGB(255, 100, 150)
    CloseButton.Font = Enum.Font.Code
    CloseButton.TextSize = 10 -- Smaller
    CloseButton.Parent = TopBar
    
    -- Content Area
    local ContentFrame = Instance.new("Frame")
    ContentFrame.Size = UDim2.new(1, -10, 1, -35) -- Smaller margins
    ContentFrame.Position = UDim2.new(0, 5, 0, 30) -- Adjusted for smaller top bar
    ContentFrame.BackgroundTransparency = 1
    ContentFrame.Parent = MainFrame
    
    -- Tab Buttons - SMALLER (4 TABS NOW)
    local MainTabButton = Instance.new("TextButton")
    MainTabButton.Text = "MAIN"
    MainTabButton.Size = UDim2.new(0.25, -3, 0, 22) -- Smaller for 4 tabs
    MainTabButton.Position = UDim2.new(0, 0, 0, 0)
    MainTabButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
    MainTabButton.TextColor3 = Color3.fromRGB(220, 150, 255)
    MainTabButton.Font = Enum.Font.Code
    MainTabButton.TextSize = 9 -- Smaller
    MainTabButton.Parent = ContentFrame
    
    local AutoTabButton = Instance.new("TextButton")
    AutoTabButton.Text = "AUTO"
    AutoTabButton.Size = UDim2.new(0.25, -3, 0, 22)
    AutoTabButton.Position = UDim2.new(0.25, 0, 0, 0)
    AutoTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
    AutoTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    AutoTabButton.Font = Enum.Font.Code
    AutoTabButton.TextSize = 9
    AutoTabButton.Parent = ContentFrame
    
    local PremTabButton = Instance.new("TextButton") -- NEW PREM TAB
    PremTabButton.Text = "PREM"
    PremTabButton.Size = UDim2.new(0.25, -3, 0, 22)
    PremTabButton.Position = UDim2.new(0.5, 0, 0, 0)
    PremTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
    PremTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    PremTabButton.Font = Enum.Font.Code
    PremTabButton.TextSize = 9
    PremTabButton.Parent = ContentFrame
    
    local StatsTabButton = Instance.new("TextButton")
    StatsTabButton.Text = "STATS"
    StatsTabButton.Size = UDim2.new(0.25, -3, 0, 22)
    StatsTabButton.Position = UDim2.new(0.75, 0, 0, 0)
    StatsTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
    StatsTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    StatsTabButton.Font = Enum.Font.Code
    StatsTabButton.TextSize = 9
    StatsTabButton.Parent = ContentFrame
    
    -- Tab Frames - ALL SCROLLING FOR MOBILE
    local MainTabContent = Instance.new("ScrollingFrame")
    MainTabContent.Size = UDim2.new(1, 0, 1, -27)
    MainTabContent.Position = UDim2.new(0, 0, 0, 27)
    MainTabContent.BackgroundTransparency = 1
    MainTabContent.ScrollBarThickness = 3
    MainTabContent.ScrollBarImageColor3 = Color3.fromRGB(180, 80, 255)
    MainTabContent.Visible = true
    MainTabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    MainTabContent.Parent = ContentFrame
    
    local AutoTabContent = Instance.new("ScrollingFrame")
    AutoTabContent.Size = UDim2.new(1, 0, 1, -27)
    AutoTabContent.Position = UDim2.new(0, 0, 0, 27)
    AutoTabContent.BackgroundTransparency = 1
    AutoTabContent.ScrollBarThickness = 3
    AutoTabContent.ScrollBarImageColor3 = Color3.fromRGB(180, 80, 255)
    AutoTabContent.Visible = false
    AutoTabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    AutoTabContent.Parent = ContentFrame
    
    local PremTabContent = Instance.new("ScrollingFrame") -- NEW PREM TAB CONTENT
    PremTabContent.Size = UDim2.new(1, 0, 1, -27)
    PremTabContent.Position = UDim2.new(0, 0, 0, 27)
    PremTabContent.BackgroundTransparency = 1
    PremTabContent.ScrollBarThickness = 3
    PremTabContent.ScrollBarImageColor3 = Color3.fromRGB(180, 80, 255)
    PremTabContent.Visible = false
    PremTabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    PremTabContent.Parent = ContentFrame
    
    local StatsTabContent = Instance.new("ScrollingFrame")
    StatsTabContent.Size = UDim2.new(1, 0, 1, -27)
    StatsTabContent.Position = UDim2.new(0, 0, 0, 27)
    StatsTabContent.BackgroundTransparency = 1
    StatsTabContent.ScrollBarThickness = 3
    StatsTabContent.ScrollBarImageColor3 = Color3.fromRGB(180, 80, 255)
    StatsTabContent.Visible = false
    StatsTabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
    StatsTabContent.Parent = ContentFrame
    
    -- Tab switching
    MainTabButton.MouseButton1Click:Connect(function()
        MainTabContent.Visible = true
        AutoTabContent.Visible = false
        PremTabContent.Visible = false
        StatsTabContent.Visible = false
        MainTabButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
        MainTabButton.TextColor3 = Color3.fromRGB(220, 150, 255)
        AutoTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        AutoTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        PremTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        PremTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        StatsTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        StatsTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    end)
    
    AutoTabButton.MouseButton1Click:Connect(function()
        MainTabContent.Visible = false
        AutoTabContent.Visible = true
        PremTabContent.Visible = false
        StatsTabContent.Visible = false
        MainTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        MainTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        AutoTabButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
        AutoTabButton.TextColor3 = Color3.fromRGB(220, 150, 255)
        PremTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        PremTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        StatsTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        StatsTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    end)
    
    PremTabButton.MouseButton1Click:Connect(function()
        MainTabContent.Visible = false
        AutoTabContent.Visible = false
        PremTabContent.Visible = true
        StatsTabContent.Visible = false
        MainTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        MainTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        AutoTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        AutoTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        PremTabButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
        PremTabButton.TextColor3 = Color3.fromRGB(220, 150, 255)
        StatsTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        StatsTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
    end)
    
    StatsTabButton.MouseButton1Click:Connect(function()
        MainTabContent.Visible = false
        AutoTabContent.Visible = false
        PremTabContent.Visible = false
        StatsTabContent.Visible = true
        MainTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        MainTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        AutoTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        AutoTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        PremTabButton.BackgroundColor3 = Color3.fromRGB(20, 7, 40)
        PremTabButton.TextColor3 = Color3.fromRGB(150, 100, 200)
        StatsTabButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
        StatsTabButton.TextColor3 = Color3.fromRGB(220, 150, 255)
    end)
    
    -- ============================================================================
    -- CREATE ALL FUNCTIONAL BUTTONS - SMALLER
    -- ============================================================================
    
    local function createMainButton(text, yPos, color)
        local button = Instance.new("TextButton")
        button.Text = text
        button.Size = UDim2.new(1, 0, 0, 28) -- Smaller
        button.Position = UDim2.new(0, 0, 0, yPos)
        button.BackgroundColor3 = color or Color3.fromRGB(25, 8, 45)
        button.TextColor3 = Color3.fromRGB(220, 180, 255)
        button.Font = Enum.Font.Code
        button.TextSize = 11 -- Smaller
        button.Parent = MainTabContent
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 3) -- Smaller
        corner.Parent = button
        
        local stroke = Instance.new("UIStroke")
        stroke.Color = Color3.fromRGB(150, 60, 220)
        stroke.Thickness = 1
        stroke.Parent = button
        
        return button
    end
    
    local function createAutoToggle(text, yPos)
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1, 0, 0, 24) -- Smaller
        frame.Position = UDim2.new(0, 0, 0, yPos)
        frame.BackgroundTransparency = 1
        frame.Parent = AutoTabContent
        
        local label = Instance.new("TextLabel")
        label.Text = text
        label.Size = UDim2.new(0.7, 0, 1, 0)
        label.Position = UDim2.new(0, 0, 0, 0)
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.fromRGB(220, 180, 255)
        label.Font = Enum.Font.Code
        label.TextSize = 10 -- Smaller
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = frame
        
        local toggle = Instance.new("TextButton")
        toggle.Text = "OFF"
        toggle.Size = UDim2.new(0.25, 0, 0.8, 0)
        toggle.Position = UDim2.new(0.72, 0, 0.1, 0)
        toggle.BackgroundColor3 = Color3.fromRGB(40, 10, 10)
        toggle.TextColor3 = Color3.fromRGB(255, 100, 100)
        toggle.Font = Enum.Font.Code
        toggle.TextSize = 9 -- Smaller
        toggle.Parent = frame
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 2) -- Smaller
        corner.Parent = toggle
        
        local stroke = Instance.new("UIStroke")
        stroke.Color = Color3.fromRGB(150, 40, 40)
        stroke.Thickness = 1
        stroke.Parent = toggle
        
        return toggle
    end
    
    -- MAIN TAB BUTTONS (8 LABELS)
    local mainButtons = {}
    local mainButtonTitles = {
        "INF MONEY (OP)",
        "SAVE POSITION",
        "LOAD POSITION",
        "FREE GROUP+ REWARD",
        "DUPE BRAINROT (VISAL)",
        "HIT ALL USERS",
        "INVISIBILITY",
        "ANTI RAGDOLL"
    }
    
    for i, title in ipairs(mainButtonTitles) do
        local button = createMainButton(title, (i-1) * 32, Color3.fromRGB(25, 8, 45))
        table.insert(mainButtons, button)
    end
    
    -- AUTO TAB TOGGLES (9 LABELS)
    local autoToggles = {}
    local autoToggleTitles = {
        "Auto Collect Money",
        "Auto Sell Brainrot",
        "Auto Rebirth",
        "Remove Tsunami (OP)",
        "Inf Jump",
        "Auto Upgrade All Brainrots",
        "Auto Take Celestial",
        "Auto Take Secret",
        "Auto Interact Nearby"
    }
    
    for i, title in ipairs(autoToggleTitles) do
        local toggle = createAutoToggle(title, (i-1) * 28)
        table.insert(autoToggles, toggle)
    end
    
    -- PREM TAB CONTENT - NEW PREMIUM FEATURES (6 FEATURES NOW)
    local premToggles = {}
    local premToggleTitles = {
        "Auto Upgrade Speed",
        "Auto +1 Speed",
        "Auto +5 Speed", 
        "Auto +10 Speed",
        "Auto Upgrade Carry",
        "FLY [F]"
    }
    
    for i, title in ipairs(premToggleTitles) do
        local frame = Instance.new("Frame")
        frame.Size = UDim2.new(1, 0, 0, 24)
        frame.Position = UDim2.new(0, 0, 0, (i-1) * 28)
        frame.BackgroundTransparency = 1
        frame.Parent = PremTabContent
        
        local label = Instance.new("TextLabel")
        label.Text = title
        label.Size = UDim2.new(0.7, 0, 1, 0)
        label.Position = UDim2.new(0, 0, 0, 0)
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.fromRGB(220, 180, 255)
        label.Font = Enum.Font.Code
        label.TextSize = 10
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = frame
        
        local toggle = Instance.new("TextButton")
        toggle.Text = "OFF"
        toggle.Size = UDim2.new(0.25, 0, 0.8, 0)
        toggle.Position = UDim2.new(0.72, 0, 0.1, 0)
        toggle.BackgroundColor3 = Color3.fromRGB(40, 10, 10)
        toggle.TextColor3 = Color3.fromRGB(255, 100, 100)
        toggle.Font = Enum.Font.Code
        toggle.TextSize = 9
        toggle.Parent = frame
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 2)
        corner.Parent = toggle
        
        local stroke = Instance.new("UIStroke")
        stroke.Color = Color3.fromRGB(150, 40, 40)
        stroke.Thickness = 1
        stroke.Parent = toggle
        
        table.insert(premToggles, toggle)
    end
    
    -- Update canvas sizes
    MainTabContent.CanvasSize = UDim2.new(0, 0, 0, #mainButtonTitles * 32)
    AutoTabContent.CanvasSize = UDim2.new(0, 0, 0, #autoToggleTitles * 28)
    PremTabContent.CanvasSize = UDim2.new(0, 0, 0, #premToggleTitles * 28)
    
    -- ============================================================================
    -- STATS TAB CONTENT
    -- ============================================================================
    
    -- Stats Labels
    local statsLabels = {}
    for i = 1, 4 do
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -10, 0, 22)
        label.Position = UDim2.new(0, 5, 0, 5 + ((i-1) * 25))
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.fromRGB(200, 160, 255)
        label.Font = Enum.Font.Code
        label.TextSize = 10
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Text = "Label " .. i
        label.Parent = StatsTabContent
        table.insert(statsLabels, label)
    end
    
    -- Copy Discord Link Button
    local copyDiscordButton = Instance.new("TextButton")
    copyDiscordButton.Text = "copy discord link"
    copyDiscordButton.Size = UDim2.new(1, -10, 0, 28)
    copyDiscordButton.Position = UDim2.new(0, 5, 0, 110)
    copyDiscordButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
    copyDiscordButton.TextColor3 = Color3.fromRGB(220, 180, 255)
    copyDiscordButton.Font = Enum.Font.Code
    copyDiscordButton.TextSize = 11
    copyDiscordButton.Parent = StatsTabContent
    
    local copyDiscordCorner = Instance.new("UICorner")
    copyDiscordCorner.CornerRadius = UDim.new(0, 3)
    copyDiscordCorner.Parent = copyDiscordButton
    
    local copyDiscordStroke = Instance.new("UIStroke")
    copyDiscordStroke.Color = Color3.fromRGB(180, 80, 255)
    copyDiscordStroke.Thickness = 1
    copyDiscordStroke.Parent = copyDiscordButton
    
    -- Auto Load Script Button
    local autoLoadButton = Instance.new("TextButton")
    autoLoadButton.Text = "AUTO LOAD SCRIPT"
    autoLoadButton.Size = UDim2.new(1, -10, 0, 28)
    autoLoadButton.Position = UDim2.new(0, 5, 0, 145)
    autoLoadButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
    autoLoadButton.TextColor3 = Color3.fromRGB(220, 180, 255)
    autoLoadButton.Font = Enum.Font.Code
    autoLoadButton.TextSize = 11
    autoLoadButton.Parent = StatsTabContent
    
    local autoLoadCorner = Instance.new("UICorner")
    autoLoadCorner.CornerRadius = UDim.new(0, 3)
    autoLoadCorner.Parent = autoLoadButton
    
    local autoLoadStroke = Instance.new("UIStroke")
    autoLoadStroke.Color = Color3.fromRGB(180, 80, 255)
    autoLoadStroke.Thickness = 1
    autoLoadStroke.Parent = autoLoadButton
    
    -- Auto Load Status
    local autoLoadStatus = Instance.new("TextLabel")
    autoLoadStatus.Text = "Status: Ready"
    autoLoadStatus.Size = UDim2.new(1, -10, 0, 20)
    autoLoadStatus.Position = UDim2.new(0, 5, 0, 180)
    autoLoadStatus.BackgroundTransparency = 1
    autoLoadStatus.TextColor3 = Color3.fromRGB(150, 255, 150)
    autoLoadStatus.Font = Enum.Font.Code
    autoLoadStatus.TextSize = 10
    autoLoadStatus.TextXAlignment = Enum.TextXAlignment.Left
    autoLoadStatus.Parent = StatsTabContent
    
    -- Changelog Frame
    local changelogFrame = Instance.new("Frame")
    changelogFrame.Size = UDim2.new(1, -10, 0, 90)
    changelogFrame.Position = UDim2.new(0, 5, 0, 210)
    changelogFrame.BackgroundColor3 = Color3.fromRGB(25, 8, 45)
    changelogFrame.BorderSizePixel = 0
    changelogFrame.Parent = StatsTabContent
    
    local changelogCorner = Instance.new("UICorner")
    changelogCorner.CornerRadius = UDim.new(0, 3)
    changelogCorner.Parent = changelogFrame
    
    -- Changelog Title
    local changelogTitle = Instance.new("TextLabel")
    changelogTitle.Text = "v1.1 PREM - 01/12/2024"
    changelogTitle.Size = UDim2.new(1, -5, 0, 20)
    changelogTitle.Position = UDim2.new(0, 5, 0, 5)
    changelogTitle.BackgroundTransparency = 1
    changelogTitle.TextColor3 = Color3.fromRGB(200, 100, 255)
    changelogTitle.Font = Enum.Font.Code
    changelogTitle.TextSize = 10
    changelogTitle.TextXAlignment = Enum.TextXAlignment.Left
    changelogTitle.Parent = changelogFrame
    
    -- Changelog Content
    local changelogContent = Instance.new("TextLabel")
    changelogContent.Text = "• New PREM Tab\n• Auto Speed Upgrade\n• Auto Carry Upgrade\n• Flying Script (F)\n• Removed Set Speed/Jump"
    changelogContent.Size = UDim2.new(1, -5, 0, 60)
    changelogContent.Position = UDim2.new(0, 5, 0, 25)
    changelogContent.BackgroundTransparency = 1
    changelogContent.TextColor3 = Color3.fromRGB(180, 180, 255)
    changelogContent.Font = Enum.Font.Code
    changelogContent.TextSize = 9
    changelogContent.TextXAlignment = Enum.TextXAlignment.Left
    changelogContent.TextYAlignment = Enum.TextYAlignment.Top
    changelogContent.Parent = changelogFrame
    
    -- Made by text
    local madeByText = Instance.new("TextLabel")
    madeByText.Text = "made by warp hub devs <3"
    madeByText.Size = UDim2.new(1, -10, 0, 25)
    madeByText.Position = UDim2.new(0, 5, 0, 310)
    madeByText.BackgroundTransparency = 1
    madeByText.TextColor3 = Color3.fromRGB(200, 150, 255)
    madeByText.Font = Enum.Font.Code
    madeByText.TextSize = 10
    madeByText.TextXAlignment = Enum.TextXAlignment.Left
    madeByText.Parent = StatsTabContent
    
    -- Update canvas size
    StatsTabContent.CanvasSize = UDim2.new(0, 0, 0, 340)
    
    -- ============================================================================
    -- UI FUNCTIONALITY - MOBILE FRIENDLY
    -- ============================================================================
    
    local guiOpen = false
    
    -- Toggle button
    ToggleButton.MouseButton1Click:Connect(function()
        guiOpen = not guiOpen
        MainFrame.Visible = guiOpen
        ToggleButton.Text = guiOpen and "CLOSE" or "WARP"
    end)
    
    -- Close button
    CloseButton.MouseButton1Click:Connect(function()
        guiOpen = false
        MainFrame.Visible = false
        ToggleButton.Text = "WARP"
    end)
    
    -- Make draggable - IMPROVED FOR MOBILE
    local dragging = false
    local dragStart = Vector2.new(0, 0)
    local startPos = MainFrame.Position
    
    -- Touch support for mobile
    local function onInputBegan(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            if input.Position.X >= TopBar.AbsolutePosition.X and input.Position.X <= TopBar.AbsolutePosition.X + TopBar.AbsoluteSize.X and
               input.Position.Y >= TopBar.AbsolutePosition.Y and input.Position.Y <= TopBar.AbsolutePosition.Y + TopBar.AbsoluteSize.Y then
                dragging = true
                dragStart = input.Position
                startPos = MainFrame.Position
            end
        end
    end
    
    -- Support both mouse and touch
    UserInputService.InputBegan:Connect(onInputBegan)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
    
    -- F5 toggle
    UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.F5 then
            guiOpen = not guiOpen
            MainFrame.Visible = guiOpen
            ToggleButton.Text = guiOpen and "CLOSE" or "WARP"
        end
    end)
    
    -- ============================================================================
    -- GAME FUNCTIONS
    -- ============================================================================
    
    -- Variables
    local connections = {}
    local savedPosition = nil
    local invisibilityEnabled = false
    local antiRagdollEnabled = false
    local flyingEnabled = false
    local flySpeed = 50
    
    -- Function to find remotes
    local function getRemote(name)
        for _, obj in pairs(ReplicatedStorage:GetDescendants()) do
            if obj.Name == name and (obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction")) then
                return obj
            end
        end
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj.Name == name and (obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction")) then
                return obj
            end
        end
        return nil
    end
    
    -- Function to run optimized loops
    local function runOptimizedLoop(name, func, delay, checkLag)
        if connections[name] then
            connections[name]:Disconnect()
        end
        local lastTime = 0
        local runCount = 0
        
        connections[name] = RunService.Heartbeat:Connect(function()
            local now = tick()
            if now - lastTime >= delay then
                lastTime = now
                
                if checkLag then
                    runCount = runCount + 1
                    if runCount % 5 == 0 then
                        func()
                    end
                else
                    func()
                end
            end
        end)
    end
    
    -- Function to find and upgrade speed
    local function upgradeSpeed(amount)
        -- Try different speed upgrade remotes
        local upgradeRemotes = {
            "UpgradeSpeed",
            "BuySpeed",
            "UpgradeWalkSpeed",
            "SpeedUpgrade",
            "UpgradeMovement"
        }
        
        for _, remoteName in pairs(upgradeRemotes) do
            local remote = getRemote(remoteName)
            if remote then
                pcall(function()
                    if remote:IsA("RemoteEvent") then
                        remote:FireServer(amount)
                    else
                        remote:InvokeServer(amount)
                    end
                    print("Upgraded speed by: " .. tostring(amount))
                end)
                return true
            end
        end
        
        -- Try general upgrade remote
        local generalRemote = getRemote("Upgrade") or getRemote("BuyUpgrade")
        if generalRemote then
            pcall(function()
                if generalRemote:IsA("RemoteEvent") then
                    generalRemote:FireServer("Speed", amount)
                    generalRemote:FireServer("WalkSpeed", amount)
                else
                    generalRemote:InvokeServer("Speed", amount)
                    generalRemote:InvokeServer("WalkSpeed", amount)
                end
                print("Upgraded speed via general remote")
            end)
            return true
        end
        
        return false
    end
    
    -- Function to find and upgrade carry capacity
    local function upgradeCarryCapacity()
        -- Try different carry upgrade remotes
        local carryRemotes = {
            "UpgradeCapacity",
            "BuyCapacity",
            "UpgradeCarry",
            "CapacityUpgrade",
            "UpgradeStorage"
        }
        
        for _, remoteName in pairs(carryRemotes) do
            local remote = getRemote(remoteName)
            if remote then
                pcall(function()
                    if remote:IsA("RemoteEvent") then
                        remote:FireServer()
                    else
                        remote:InvokeServer()
                    end
                    print("Upgraded carry capacity")
                end)
                return true
            end
        end
        
        -- Try general upgrade remote for carry
        local generalRemote = getRemote("Upgrade") or getRemote("BuyUpgrade")
        if generalRemote then
            pcall(function()
                if generalRemote:IsA("RemoteEvent") then
                    generalRemote:FireServer("Capacity")
                    generalRemote:FireServer("Carry")
                    generalRemote:FireServer("Storage")
                else
                    generalRemote:InvokeServer("Capacity")
                    generalRemote:InvokeServer("Carry")
                    generalRemote:InvokeServer("Storage")
                end
                print("Upgraded carry via general remote")
            end)
            return true
        end
        
        return false
    end
    
    -- INF MONEY (Button 1)
    local infMoneyEnabled = false
    mainButtons[1].MouseButton1Click:Connect(function()
        infMoneyEnabled = not infMoneyEnabled
        mainButtons[1].Text = infMoneyEnabled and "INF MONEY [ON]" or "INF MONEY (OP)"
        
        if infMoneyEnabled then
            print("INF MONEY: ENABLED")
            runOptimizedLoop("infMoney", function()
                -- Claim free epic
                local takeRemote = getRemote("TakeFreeEpic") or getRemote("ClaimEpic")
                if takeRemote then
                    pcall(function()
                        if takeRemote:IsA("RemoteEvent") then
                            takeRemote:FireServer()
                        else
                            takeRemote:InvokeServer()
                        end
                    end)
                end
                
                -- Sell brainrot
                local sellRemote = getRemote("SellBrainrot") or getRemote("SellAll")
                if sellRemote then
                    pcall(function()
                        if sellRemote:IsA("RemoteEvent") then
                            sellRemote:FireServer()
                        else
                            sellRemote:InvokeServer()
                        end
                    end)
                end
            end, 0.5, false)
        else
            print("INF MONEY: DISABLED")
            if connections.infMoney then
                connections.infMoney:Disconnect()
                connections.infMoney = nil
            end
        end
    end)
    
    -- SAVE POSITION (Button 2)
    mainButtons[2].MouseButton1Click:Connect(function()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            savedPosition = player.Character.HumanoidRootPart.CFrame
            mainButtons[2].Text = "POSITION SAVED!"
            wait(0.5)
            mainButtons[2].Text = "SAVE POSITION"
            print("Position saved")
        end
    end)
    
    -- LOAD POSITION (Button 3)
    mainButtons[3].MouseButton1Click:Connect(function()
        if savedPosition and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            player.Character.HumanoidRootPart.CFrame = savedPosition
            mainButtons[3].Text = "POSITION LOADED!"
            wait(0.5)
            mainButtons[3].Text = "LOAD POSITION"
            print("Teleported to saved position")
        end
    end)
    
    -- FREE GROUP+ REWARD (Button 4)
    mainButtons[4].MouseButton1Click:Connect(function()
        mainButtons[4].Text = "CLAIMING..."
        local remote = getRemote("TakeFreeEpic") or getRemote("ClaimGroupReward") or getRemote("GetFreeReward")
        if remote then
            pcall(function()
                if remote:IsA("RemoteEvent") then
                    remote:FireServer()
                else
                    remote:InvokeServer()
                end
                mainButtons[4].Text = "REWARD CLAIMED!"
                print("Free reward claimed")
            end)
        else
            mainButtons[4].Text = "CLAIM FAILED"
        end
        wait(1)
        mainButtons[4].Text = "FREE GROUP+ REWARD"
    end)
    
    -- DUPE BRAINROT (Button 5)
    mainButtons[5].MouseButton1Click:Connect(function()
        mainButtons[5].Text = "DUPING..."
        
        local currentTool = nil
        if player.Character then
            for _, tool in pairs(player.Character:GetChildren()) do
                if tool:IsA("Tool") then
                    currentTool = tool
                    break
                end
            end
        end
        
        if not currentTool then
            local backpack = player:FindFirstChild("Backpack")
            if backpack then
                for _, tool in pairs(backpack:GetChildren()) do
                    if tool:IsA("Tool") then
                        currentTool = tool
                        break
                    end
                end
            end
        end
        
        if currentTool then
            local clone = currentTool:Clone()
            clone.Parent = player:FindFirstChild("Backpack") or player.Character
            mainButtons[5].Text = "DUPE SUCCESS!"
            print("Tool duplicated: " .. currentTool.Name)
        else
            mainButtons[5].Text = "NO TOOL FOUND"
        end
        
        wait(1)
        mainButtons[5].Text = "DUPE BRAINROT (VISAL)"
    end)
    
    -- HIT ALL USERS (Button 6) - EXPAND TORSO METHOD
    mainButtons[6].MouseButton1Click:Connect(function()
        mainButtons[6].Text = "HITTING..."
        
        -- Function to find and equip bat
        local function findAndEquipBat()
            local backpack = player:FindFirstChild("Backpack")
            if backpack then
                for _, item in pairs(backpack:GetChildren()) do
                    if item:IsA("Tool") and (item.Name:lower():find("bat") or item.Name:lower():find("hammer") or item.Name:lower():find("club")) then
                        return item
                    end
                end
            end
            
            if player.Character then
                for _, item in pairs(player.Character:GetChildren()) do
                    if item:IsA("Tool") and (item.Name:lower():find("bat") or item.Name:lower():find("hammer") or item.Name:lower():find("club")) then
                        return item
                    end
                end
            end
            
            return nil
        end
        
        -- Function to expand torso and hit
        local function expandAndHitPlayer(targetPlayer, batTool)
            if not targetPlayer or not targetPlayer.Character then return false end
            
            local targetChar = targetPlayer.Character
            local torso = targetChar:FindFirstChild("Torso") or targetChar:FindFirstChild("UpperTorso")
            
            if torso and torso:IsA("BasePart") then
                -- Store original size
                local originalSize = torso.Size
                local originalTransparency = torso.Transparency
                
                -- Expand torso temporarily
                torso.Size = Vector3.new(50, 50, 50)
                torso.Transparency = 0.8
                torso.CanCollide = false
                
                -- Equip bat if available
                if batTool and batTool.Parent ~= player.Character then
                    batTool.Parent = player.Character
                end
                
                -- Try to hit with bat
                if batTool then
                    local handle = batTool:FindFirstChild("Handle")
                    if handle then
                        -- Position bat near expanded torso
                        handle.CFrame = torso.CFrame
                        
                        -- Try to click bat
                        local clickDetector = handle:FindFirstChildOfClass("ClickDetector")
                        if clickDetector then
                            pcall(function()
                                fireclickdetector(clickDetector)
                            end)
                        end
                        
                        -- Try tool remote
                        local toolRemote = batTool:FindFirstChildWhichIsA("RemoteEvent") or batTool:FindFirstChildWhichIsA("RemoteFunction")
                        if toolRemote then
                            pcall(function()
                                if toolRemote:IsA("RemoteEvent") then
                                    toolRemote:FireServer(torso)
                                else
                                    toolRemote:InvokeServer(torso)
                                end
                            end)
                        end
                    end
                end
                
                -- Try direct hit remotes
                local hitRemotes = {"Hit", "Damage", "Attack"}
                for _, remoteName in pairs(hitRemotes) do
                    local remote = getRemote(remoteName)
                    if remote then
                        pcall(function()
                            if remote:IsA("RemoteEvent") then
                                remote:FireServer(targetPlayer)
                            else
                                remote:InvokeServer(targetPlayer)
                            end
                        end)
                    end
                end
                
                -- Restore original size
                wait(0.1)
                torso.Size = originalSize
                torso.Transparency = originalTransparency
                
                return true
            end
            
            return false
        end
        
        -- Main execution
        if player.Character then
            local batTool = findAndEquipBat()
            local hitCount = 0
            
            -- Get all other players
            local otherPlayers = {}
            for _, otherPlayer in pairs(Players:GetPlayers()) do
                if otherPlayer ~= player and otherPlayer.Character then
                    table.insert(otherPlayers, otherPlayer)
                end
            end
            
            if #otherPlayers > 0 then
                for i, targetPlayer in ipairs(otherPlayers) do
                    mainButtons[6].Text = "HITTING (" .. i .. "/" .. #otherPlayers .. ")"
                    
                    -- Small delay to prevent lag
                    RunService.Heartbeat:Wait()
                    
                    -- Expand and hit
                    local success = expandAndHitPlayer(targetPlayer, batTool)
                    if success then
                        hitCount = hitCount + 1
                    end
                end
                
                mainButtons[6].Text = "HIT " .. hitCount .. "/" .. #otherPlayers .. "!"
            else
                mainButtons[6].Text = "NO PLAYERS"
            end
        else
            mainButtons[6].Text = "NO CHARACTER"
        end
        
        wait(1)
        mainButtons[6].Text = "HIT ALL USERS"
    end)
    
    -- INVISIBILITY (Button 7)
    mainButtons[7].MouseButton1Click:Connect(function()
        invisibilityEnabled = not invisibilityEnabled
        mainButtons[7].Text = invisibilityEnabled and "INVISIBILITY [ON]" or "INVISIBILITY"
        
        if invisibilityEnabled then
            print("INVISIBILITY: ENABLED")
            
            -- Make character invisible
            if player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Transparency = 1
                        if part:FindFirstChildOfClass("Decal") then
                            part:FindFirstChildOfClass("Decal").Transparency = 1
                        end
                    elseif part:IsA("Accessory") then
                        local handle = part:FindFirstChild("Handle")
                        if handle and handle:IsA("BasePart") then
                            handle.Transparency = 1
                        end
                    end
                end
            end
            
            -- Keep invisible when character changes
            connections.invisibility = player.CharacterAdded:Connect(function(char)
                wait(1)
                for _, part in pairs(char:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Transparency = 1
                    end
                end
            end)
        else
            print("INVISIBILITY: DISABLED")
            if connections.invisibility then
                connections.invisibility:Disconnect()
                connections.invisibility = nil
            end
            
            -- Make character visible again
            if player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Transparency = 0
                    end
                end
            end
        end
    end)
    
    -- ANTI RAGDOLL (Button 8)
    mainButtons[8].MouseButton1Click:Connect(function()
        antiRagdollEnabled = not antiRagdollEnabled
        mainButtons[8].Text = antiRagdollEnabled and "ANTI RAGDOLL [ON]" or "ANTI RAGDOLL"
        
        if antiRagdollEnabled then
            print("ANTI RAGDOLL: ENABLED")
            
            -- Function to prevent ragdoll
            local function preventRagdoll()
                if player.Character then
                    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        -- Prevent ragdoll
                        humanoid.BreakJointsOnDeath = false
                        
                        -- Keep humanoid alive
                        if humanoid.Health <= 0 then
                            humanoid.Health = 100
                        end
                        
                        -- Prevent falling
                        if humanoid:GetState() == Enum.HumanoidStateType.FallingDown then
                            humanoid:ChangeState(Enum.HumanoidStateType.Running)
                        end
                    end
                end
            end
            
            -- Run anti-ragdoll loop
            runOptimizedLoop("antiRagdoll", preventRagdoll, 0.1, false)
            
        else
            print("ANTI RAGDOLL: DISABLED")
            if connections.antiRagdoll then
                connections.antiRagdoll:Disconnect()
                connections.antiRagdoll = nil
            end
        end
    end)
    
    -- ============================================================================
    -- PREM TAB FUNCTIONS - NEW PREMIUM FEATURES
    -- ============================================================================
    
    -- Auto Upgrade Speed (Toggle 1) - NEW
    premToggles[1].MouseButton1Click:Connect(function()
        local enabled = premToggles[1].Text == "OFF"
        premToggles[1].Text = enabled and "ON" or "OFF"
        premToggles[1].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[1].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Upgrade Speed: ENABLED")
            runOptimizedLoop("autoUpgradeSpeed", function()
                -- Try to upgrade speed automatically
                upgradeSpeed(1) -- Default upgrade amount
            end, 2, false) -- Try every 2 seconds
        else
            print("Auto Upgrade Speed: DISABLED")
            if connections.autoUpgradeSpeed then
                connections.autoUpgradeSpeed:Disconnect()
                connections.autoUpgradeSpeed = nil
            end
        end
    end)
    
    -- Auto +1 Speed (Toggle 2) - NEW
    premToggles[2].MouseButton1Click:Connect(function()
        local enabled = premToggles[2].Text == "OFF"
        premToggles[2].Text = enabled and "ON" or "OFF"
        premToggles[2].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[2].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto +1 Speed: ENABLED")
            -- Disable other speed toggles
            if premToggles[3].Text == "ON" then premToggles[3]:Activate() end
            if premToggles[4].Text == "ON" then premToggles[4]:Activate() end
            
            runOptimizedLoop("autoPlus1Speed", function()
                upgradeSpeed(1)
            end, 1, false) -- Try every second
        else
            print("Auto +1 Speed: DISABLED")
            if connections.autoPlus1Speed then
                connections.autoPlus1Speed:Disconnect()
                connections.autoPlus1Speed = nil
            end
        end
    end)
    
    -- Auto +5 Speed (Toggle 3) - NEW
    premToggles[3].MouseButton1Click:Connect(function()
        local enabled = premToggles[3].Text == "OFF"
        premToggles[3].Text = enabled and "ON" or "OFF"
        premToggles[3].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[3].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto +5 Speed: ENABLED")
            -- Disable other speed toggles
            if premToggles[2].Text == "ON" then premToggles[2]:Activate() end
            if premToggles[4].Text == "ON" then premToggles[4]:Activate() end
            
            runOptimizedLoop("autoPlus5Speed", function()
                upgradeSpeed(5)
            end, 1, false) -- Try every second
        else
            print("Auto +5 Speed: DISABLED")
            if connections.autoPlus5Speed then
                connections.autoPlus5Speed:Disconnect()
                connections.autoPlus5Speed = nil
            end
        end
    end)
    
    -- Auto +10 Speed (Toggle 4) - NEW
    premToggles[4].MouseButton1Click:Connect(function()
        local enabled = premToggles[4].Text == "OFF"
        premToggles[4].Text = enabled and "ON" or "OFF"
        premToggles[4].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[4].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto +10 Speed: ENABLED")
            -- Disable other speed toggles
            if premToggles[2].Text == "ON" then premToggles[2]:Activate() end
            if premToggles[3].Text == "ON" then premToggles[3]:Activate() end
            
            runOptimizedLoop("autoPlus10Speed", function()
                upgradeSpeed(10)
            end, 1, false) -- Try every second
        else
            print("Auto +10 Speed: DISABLED")
            if connections.autoPlus10Speed then
                connections.autoPlus10Speed:Disconnect()
                connections.autoPlus10Speed = nil
            end
        end
    end)
    
    -- Auto Upgrade Carry (Toggle 5) - NEW
    premToggles[5].MouseButton1Click:Connect(function()
        local enabled = premToggles[5].Text == "OFF"
        premToggles[5].Text = enabled and "ON" or "OFF"
        premToggles[5].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[5].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Upgrade Carry: ENABLED")
            runOptimizedLoop("autoUpgradeCarry", function()
                upgradeCarryCapacity()
            end, 3, false) -- Try every 3 seconds
        else
            print("Auto Upgrade Carry: DISABLED")
            if connections.autoUpgradeCarry then
                connections.autoUpgradeCarry:Disconnect()
                connections.autoUpgradeCarry = nil
            end
        end
    end)
    
    -- FLY [F] (Toggle 6) - NEW FLYING SYSTEM
    premToggles[6].MouseButton1Click:Connect(function()
        local enabled = premToggles[6].Text == "OFF"
        premToggles[6].Text = enabled and "ON" or "OFF"
        premToggles[6].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        premToggles[6].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("FLY: ENABLED (Press F to toggle)")
            flyingEnabled = true
            
            -- Store original values
            local originalGravity = Workspace.Gravity
            local originalWalkSpeed = 16
            local originalJumpPower = 50
            
            -- Function to toggle flying
            local function toggleFlying()
                if flyingEnabled and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local hrp = player.Character.HumanoidRootPart
                    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                    
                    if humanoid then
                        -- Toggle gravity
                        if Workspace.Gravity == originalGravity then
                            Workspace.Gravity = 0
                            humanoid.PlatformStand = true
                            print("FLY: Enabled - Gravity off")
                        else
                            Workspace.Gravity = originalGravity
                            humanoid.PlatformStand = false
                            print("FLY: Disabled - Gravity on")
                        end
                    end
                end
            end
            
            -- F key to toggle flying
            connections.flyToggle = UserInputService.InputBegan:Connect(function(input)
                if input.KeyCode == Enum.KeyCode.F and flyingEnabled then
                    toggleFlying()
                end
            end)
            
            -- Flying movement controls
            connections.flyMovement = RunService.Heartbeat:Connect(function()
                if flyingEnabled and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local hrp = player.Character.HumanoidRootPart
                    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                    
                    if humanoid and humanoid.PlatformStand then
                        -- Get input for movement
                        local moveDirection = Vector3.new(0, 0, 0)
                        
                        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                            moveDirection = moveDirection + hrp.CFrame.LookVector
                        end
                        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                            moveDirection = moveDirection - hrp.CFrame.LookVector
                        end
                        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                            moveDirection = moveDirection - hrp.CFrame.RightVector
                        end
                        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                            moveDirection = moveDirection + hrp.CFrame.RightVector
                        end
                        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                            moveDirection = moveDirection + Vector3.new(0, 1, 0)
                        end
                        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.RightShift) then
                            moveDirection = moveDirection - Vector3.new(0, 1, 0)
                        end
                        
                        -- Normalize and apply movement
                        if moveDirection.Magnitude > 0 then
                            moveDirection = moveDirection.Unit * flySpeed
                            hrp.Velocity = moveDirection
                        else
                            hrp.Velocity = Vector3.new(0, 0, 0)
                        end
                    end
                end
            end)
            
        else
            print("FLY: DISABLED")
            flyingEnabled = false
            
            -- Restore original values
            if Workspace.Gravity == 0 then
                Workspace.Gravity = 196.2 -- Default Roblox gravity
            end
            
            if player.Character then
                local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.PlatformStand = false
                end
            end
            
            -- Disconnect connections
            if connections.flyToggle then
                connections.flyToggle:Disconnect()
                connections.flyToggle = nil
            end
            if connections.flyMovement then
                connections.flyMovement:Disconnect()
                connections.flyMovement = nil
            end
        end
    end)
    
    -- ============================================================================
    -- AUTO TAB FUNCTIONS (Keeping existing)
    -- ============================================================================
    
    -- Auto Collect Money (Toggle 1)
    autoToggles[1].MouseButton1Click:Connect(function()
        local enabled = autoToggles[1].Text == "OFF"
        autoToggles[1].Text = enabled and "ON" or "OFF"
        autoToggles[1].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[1].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Collect Money: ENABLED")
            runOptimizedLoop("autoCollect", function()
                local success, Event = pcall(function()
                    return ReplicatedStorage.RemoteEvents.CollectMoney
                end)
                
                if success and Event then
                    pcall(function()
                        for i = 1, 100 do
                            Event:FireServer("Slot" .. tostring(i))
                            task.wait(0.01)
                        end
                    end)
                else
                    local remote = getRemote("CollectMoney") or getRemote("CollectAll")
                    if remote then
                        pcall(function()
                            if remote:IsA("RemoteEvent") then
                                remote:FireServer()
                            else
                                remote:InvokeServer()
                            end
                        end)
                    end
                end
            end, 2, false)
        else
            print("Auto Collect Money: DISABLED")
            if connections.autoCollect then
                connections.autoCollect:Disconnect()
                connections.autoCollect = nil
            end
        end
    end)
    
    -- Auto Sell Brainrot (Toggle 2)
    autoToggles[2].MouseButton1Click:Connect(function()
        local enabled = autoToggles[2].Text == "OFF"
        autoToggles[2].Text = enabled and "ON" or "OFF"
        autoToggles[2].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[2].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Sell Brainrot: ENABLED")
            runOptimizedLoop("autoSell", function()
                local remote = getRemote("SellAll") or getRemote("SellBrainrots")
                if remote then
                    pcall(function()
                        if remote:IsA("RemoteEvent") then
                            remote:FireServer()
                        else
                            remote:InvokeServer()
                        end
                    end)
                end
            end, 3, false)
        else
            print("Auto Sell Brainrot: DISABLED")
            if connections.autoSell then
                connections.autoSell:Disconnect()
                connections.autoSell = nil
            end
        end
    end)
    
    -- Auto Rebirth (Toggle 3)
    autoToggles[3].MouseButton1Click:Connect(function()
        local enabled = autoToggles[3].Text == "OFF"
        autoToggles[3].Text = enabled and "ON" or "OFF"
        autoToggles[3].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[3].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Rebirth: ENABLED")
            runOptimizedLoop("autoRebirth", function()
                local remote = getRemote("Rebirth") or getRemote("DoRebirth")
                if remote then
                    pcall(function()
                        if remote:IsA("RemoteEvent") then
                            remote:FireServer()
                        else
                            remote:InvokeServer()
                        end
                    end)
                end
            end, 5, false)
        else
            print("Auto Rebirth: DISABLED")
            if connections.autoRebirth then
                connections.autoRebirth:Disconnect()
                connections.autoRebirth = nil
            end
        end
    end)
    
    -- Remove Tsunami (Toggle 4)
    autoToggles[4].MouseButton1Click:Connect(function()
        local enabled = autoToggles[4].Text == "OFF"
        autoToggles[4].Text = enabled and "ON" or "OFF"
        autoToggles[4].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[4].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Remove Tsunami: ENABLED")
            runOptimizedLoop("removeTsunami", function()
                local foundTsunamis = {}
                for _, obj in pairs(Workspace:GetDescendants()) do
                    if obj.Name:lower():find("tsunami") or obj.Name:lower():find("wave") then
                        table.insert(foundTsunamis, obj)
                    end
                end
                
                for _, obj in ipairs(foundTsunamis) do
                    if obj and obj.Parent then
                        pcall(function() obj:Destroy() end)
                    end
                end
            end, 0.5, true)
        else
            print("Remove Tsunami: DISABLED")
            if connections.removeTsunami then
                connections.removeTsunami:Disconnect()
                connections.removeTsunami = nil
            end
        end
    end)
    
    -- Inf Jump (Toggle 5)
    autoToggles[5].MouseButton1Click:Connect(function()
        local enabled = autoToggles[5].Text == "OFF"
        autoToggles[5].Text = enabled and "ON" or "OFF"
        autoToggles[5].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[5].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Inf Jump: ENABLED")
            
            local originalJumpPower = 50
            connections.infJump = RunService.Heartbeat:Connect(function()
                if player.Character then
                    local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.JumpPower = 100
                        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                        end
                    end
                end
            end)
        else
            print("Inf Jump: DISABLED")
            if connections.infJump then
                connections.infJump:Disconnect()
                connections.infJump = nil
            end
            
            if player.Character then
                local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.JumpPower = originalJumpPower
                end
            end
        end
    end)
    
    -- Auto Upgrade All Brainrots (Toggle 6)
    autoToggles[6].MouseButton1Click:Connect(function()
        local enabled = autoToggles[6].Text == "OFF"
        autoToggles[6].Text = enabled and "ON" or "OFF"
        autoToggles[6].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[6].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Upgrade All Brainrots: ENABLED")
            runOptimizedLoop("upgradeAll", function()
                local success, Event = pcall(function()
                    return ReplicatedStorage.RemoteFunctions.UpgradeBrainrot
                end)
                
                if success and Event then
                    pcall(function()
                        for i = 1, 10 do
                            Event:InvokeServer("Slot" .. tostring(i))
                            task.wait(0.05)
                        end
                    end)
                else
                    local remote = getRemote("UpgradeAll") or getRemote("UpgradeBrainrots")
                    if remote then
                        pcall(function()
                            if remote:IsA("RemoteEvent") then
                                remote:FireServer()
                            else
                                remote:InvokeServer()
                            end
                        end)
                    end
                end
            end, 3, false)
        else
            print("Auto Upgrade All Brainrots: DISABLED")
            if connections.upgradeAll then
                connections.upgradeAll:Disconnect()
                connections.upgradeAll = nil
            end
        end
    end)
    
    -- Auto Take Celestial (Toggle 7)
    autoToggles[7].MouseButton1Click:Connect(function()
        local enabled = autoToggles[7].Text == "OFF"
        autoToggles[7].Text = enabled and "ON" or "OFF"
        autoToggles[7].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[7].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Take Celestial: ENABLED")
            runOptimizedLoop("autoCelestial", function()
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local spawnpos = player.Character.HumanoidRootPart.CFrame
                    local hrp = player.Character.HumanoidRootPart
                    local char = player.Character
                    
                    if Workspace:FindFirstChild("ActiveBrainrots") and Workspace.ActiveBrainrots:FindFirstChild("Celestial") then
                        for i, v in pairs(Workspace.ActiveBrainrots.Celestial:GetChildren()) do
                            char:PivotTo(v:GetPivot())
                            task.wait(0.55)
                            
                            local handle = v:FindFirstChild("Handle")
                            if handle then
                                local prompt = handle:FindFirstChild("TakePrompt")
                                if prompt then
                                    fireproximityprompt(prompt, 1, true)
                                    task.wait(0.55)
                                    hrp.CFrame = spawnpos
                                    return
                                end
                            end
                        end
                    end
                end
            end, 5, false)
        else
            print("Auto Take Celestial: DISABLED")
            if connections.autoCelestial then
                connections.autoCelestial:Disconnect()
                connections.autoCelestial = nil
            end
        end
    end)
    
    -- Auto Take Secret (Toggle 8)
    autoToggles[8].MouseButton1Click:Connect(function()
        local enabled = autoToggles[8].Text == "OFF"
        autoToggles[8].Text = enabled and "ON" or "OFF"
        autoToggles[8].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[8].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Take Secret: ENABLED")
            runOptimizedLoop("autoSecret", function()
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local spawnpos = player.Character.HumanoidRootPart.CFrame
                    local hrp = player.Character.HumanoidRootPart
                    local char = player.Character
                    
                    -- Check for Secret brainrots
                    if Workspace:FindFirstChild("ActiveBrainrots") then
                        -- Look for Secret folder or secret brainrots
                        local secretFolder = Workspace.ActiveBrainrots:FindFirstChild("Secret") or Workspace.ActiveBrainrots:FindFirstChild("Mythical")
                        
                        if secretFolder then
                            for i, v in pairs(secretFolder:GetChildren()) do
                                char:PivotTo(v:GetPivot())
                                task.wait(0.55)
                                
                                local handle = v:FindFirstChild("Handle")
                                if handle then
                                    local prompt = handle:FindFirstChild("TakePrompt")
                                    if prompt then
                                        fireproximityprompt(prompt, 1, true)
                                        task.wait(0.55)
                                        hrp.CFrame = spawnpos
                                        return
                                    end
                                end
                            end
                        end
                        
                        -- Also search all brainrots for secret rarity
                        for i, v in pairs(Workspace.ActiveBrainrots:GetDescendants()) do
                            if v:IsA("Model") then
                                local rarity = v:FindFirstChild("Rarity")
                                if rarity and (rarity.Value:lower():find("secret") or rarity.Value:lower():find("mythical") or rarity.Value:lower():find("legendary")) then
                                    char:PivotTo(v:GetPivot())
                                    task.wait(0.55)
                                    
                                    local handle = v:FindFirstChild("Handle")
                                    if handle then
                                        local prompt = handle:FindFirstChild("TakePrompt")
                                        if prompt then
                                            fireproximityprompt(prompt, 1, true)
                                            task.wait(0.55)
                                            hrp.CFrame = spawnpos
                                            return
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end, 5, false)
        else
            print("Auto Take Secret: DISABLED")
            if connections.autoSecret then
                connections.autoSecret:Disconnect()
                connections.autoSecret = nil
            end
        end
    end)
    
    -- Auto Interact Nearby (Toggle 9)
    autoToggles[9].MouseButton1Click:Connect(function()
        local enabled = autoToggles[9].Text == "OFF"
        autoToggles[9].Text = enabled and "ON" or "OFF"
        autoToggles[9].BackgroundColor3 = enabled and Color3.fromRGB(0, 40, 0) or Color3.fromRGB(40, 10, 10)
        autoToggles[9].TextColor3 = enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
        
        if enabled then
            print("Auto Interact Nearby: ENABLED")
            runOptimizedLoop("autoInteract", function()
                if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local char = player.Character
                    local hrp = player.Character.HumanoidRootPart
                    
                    -- Find all proximity prompts nearby
                    for _, obj in pairs(Workspace:GetDescendants()) do
                        if obj:IsA("ProximityPrompt") then
                            local parent = obj.Parent
                            if parent then
                                -- Check if prompt is within 50 studs
                                local distance = (hrp.Position - parent.Position).Magnitude
                                if distance < 50 then
                                    -- Fire the proximity prompt
                                    fireproximityprompt(obj, 1, true)
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                    
                    -- Also look for ClickDetectors
                    for _, obj in pairs(Workspace:GetDescendants()) do
                        if obj:IsA("ClickDetector") then
                            local parent = obj.Parent
                            if parent then
                                -- Check if within 50 studs
                                local distance = (hrp.Position - parent.Position).Magnitude
                                if distance < 50 then
                                    -- Click the detector
                                    fireclickdetector(obj)
                                    task.wait(0.1)
                                end
                            end
                        end
                    end
                end
            end, 1, false)
        else
            print("Auto Interact Nearby: DISABLED")
            if connections.autoInteract then
                connections.autoInteract:Disconnect()
                connections.autoInteract = nil
            end
        end
    end)
    
    -- ============================================================================
    -- STATS TAB FUNCTIONS
    -- ============================================================================
    
    local autoLoadEnabled = false
    local enabledFeatures = {}
    
    -- Function to save enabled features
    local function saveEnabledFeatures()
        enabledFeatures = {
            mainButtons = {},
            autoToggles = {},
            premToggles = {}
        }
        
        -- Save main button states
        for i, button in ipairs(mainButtons) do
            enabledFeatures.mainButtons[i] = button.Text:find("[ON]")
        end
        
        -- Save auto toggle states
        for i, toggle in ipairs(autoToggles) do
            enabledFeatures.autoToggles[i] = toggle.Text == "ON"
        end
        
        -- Save prem toggle states
        for i, toggle in ipairs(premToggles) do
            enabledFeatures.premToggles[i] = toggle.Text == "ON"
        end
    end
    
    -- Function to load saved features
    local function loadSavedFeatures()
        autoLoadStatus.Text = "Loading features..."
        autoLoadStatus.TextColor3 = Color3.fromRGB(255, 255, 150)
        
        -- Load main buttons
        for i, wasEnabled in pairs(enabledFeatures.mainButtons or {}) do
            if wasEnabled and mainButtons[i] and not mainButtons[i].Text:find("[ON]") then
                mainButtons[i]:Activate()
                task.wait(0.1)
            end
        end
        
        -- Load auto toggles
        for i, wasEnabled in pairs(enabledFeatures.autoToggles or {}) do
            if wasEnabled and autoToggles[i] and autoToggles[i].Text == "OFF" then
                autoToggles[i]:Activate()
                task.wait(0.1)
            end
        end
        
        -- Load prem toggles
        for i, wasEnabled in pairs(enabledFeatures.premToggles or {}) do
            if wasEnabled and premToggles[i] and premToggles[i].Text == "OFF" then
                premToggles[i]:Activate()
                task.wait(0.1)
            end
        end
        
        autoLoadStatus.Text = "Features loaded!"
        autoLoadStatus.TextColor3 = Color3.fromRGB(150, 255, 150)
        
        -- Reset status after 3 seconds
        task.wait(3)
        autoLoadStatus.Text = "Status: Ready"
    end
    
    -- Save features when they change
    for i, button in ipairs(mainButtons) do
        button:GetPropertyChangedSignal("Text"):Connect(saveEnabledFeatures)
    end
    
    for i, toggle in ipairs(autoToggles) do
        toggle:GetPropertyChangedSignal("Text"):Connect(saveEnabledFeatures)
    end
    
    for i, toggle in ipairs(premToggles) do
        toggle:GetPropertyChangedSignal("Text"):Connect(saveEnabledFeatures)
    end
    
    -- Auto Load Button in Stats tab
    autoLoadButton.MouseButton1Click:Connect(function()
        autoLoadEnabled = not autoLoadEnabled
        
        if autoLoadEnabled then
            autoLoadButton.Text = "AUTO LOAD [ON]"
            autoLoadButton.BackgroundColor3 = Color3.fromRGB(0, 40, 0)
            autoLoadButton.TextColor3 = Color3.fromRGB(100, 255, 100)
            
            -- Save current states
            saveEnabledFeatures()
            
            -- Load features immediately
            loadSavedFeatures()
            
            print("Auto Load: ENABLED")
        else
            autoLoadButton.Text = "AUTO LOAD SCRIPT"
            autoLoadButton.BackgroundColor3 = Color3.fromRGB(40, 15, 80)
            autoLoadButton.TextColor3 = Color3.fromRGB(220, 180, 255)
            autoLoadStatus.Text = "Status: Disabled"
            print("Auto Load: DISABLED")
        end
    end)
    
    -- Copy Discord Link Function
    copyDiscordButton.MouseButton1Click:Connect(function()
        setclipboard(discordLink)
        copyDiscordButton.Text = "COPIED!"
        wait(1.5)
        copyDiscordButton.Text = "copy discord link"
    end)
    
    -- ============================================================================
    -- STATS UPDATE FUNCTION
    -- ============================================================================
    
    local function updateStats()
        if StatsTabContent.Visible then
            local playerCount = #Players:GetPlayers()
            local maxPlayers = Players.MaxPlayers
            statsLabels[1].Text = "Players: " .. playerCount .. "/" .. maxPlayers
            
            local uptime = math.floor(tick() - scriptStartTime)
            local hours = math.floor(uptime / 3600)
            local minutes = math.floor((uptime % 3600) / 60)
            local seconds = math.floor(uptime % 60)
            statsLabels[2].Text = "Uptime: " .. string.format("%02d:%02d:%02d", hours, minutes, seconds)
            
            statsLabels[3].Text = "Game ID: " .. game.PlaceId
            
            local time = os.date("*t", os.time())
            statsLabels[4].Text = "Time: " .. string.format("%02d:%02d", time.hour, time.min)
        end
    end
    
    -- Update stats every second
    spawn(function()
        while wait(1) do
            updateStats()
        end
    end)
    
    -- ============================================================================
    -- INITIALIZATION COMPLETE
    -- ============================================================================
    
    print("========================================")
    print("WARP HUB PREMIUM v1.1 - UPDATED")
    print("✓ New PREM Tab with premium features")
    print("✓ Auto Speed Upgrade (+1, +5, +10)")
    print("✓ Auto Upgrade Carry Capacity")
    print("✓ NEW Flying System (Press F)")
    print("✓ 4 Tabs: MAIN, AUTO, PREM, STATS")
    print("✓ Key changed to: 1heowarp")
    print("Press F5 or tap WARP button")
    print("========================================")
end